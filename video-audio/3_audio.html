<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <label>
        <input type="checkbox" id="cb"/>播放背景音乐
    </label>
    <audio src="res/bg.mp3" id="au" autoplay loop></audio>
    <script >
        cb.onchange=function(){
            if(this.checked){
                au.play();
                au.volume=0;
                var timer=setInterval(function task(){
                    var v=au.volume;
                    console.log(v);
                    v+=0.1;
                    if(v<=1)
                        au.volume=v;
                    else
                        clearInterval(timer)

                },500);
            }else{
                au.volume=1;
                var timer1=setInterval(function task(){
                    var j=au.volume;
                    console.log(j);
                    j-=0.1;
                    if(j>=0)
                        au.volume=j;
                    else if(j<0){
                        clearInterval(timer1);
                        au.pause();
                    }
                },200);
            }
        };
    </script>
</body>
</html>